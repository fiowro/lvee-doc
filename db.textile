h1. Структура БД

!db.png!

# Таблица @users@ хранит учетные записи пользователей сайта. В таблице для каждого пользователя содержится информация о его логине, имени и фамилии, дата регистрации учетной записи, хэш-код пароля, а также дату и время активации его аккаунта.
# Таблица @conferences@ хранит информацию о конференциях, предстоящих или уже пройденных. В таблице присутствуют идентификационный номер каждой конференции, ее название, дата начала и конца, и маркер открытия.
# Таблица @conference_registrations@ хранит информацию о таблице регистрации конференций.   В таблице присутствуют идентификационные номера конференций, пользователей, а также включает в себя регистрационные данные: день, место встречи, транспорт и др.
# Таблица @abstracts@ хранит информацию о тезисах. В таблице для каждого тезиса содержится его содержимое, название, информацию о авторе, версию правки, а также синхронизирующие данные.
# Таблица @abstract_versions@ хранит информацию о версии тезиса, и содержит поля некоторые данные самого тезиса, а также данные о регистрации.
# Таблица @abstract_users@ является дополнительной таблицей к таблице users и содержит выборку из таблицы users для работы непосредственно с тезисами, содержит поля идентификационные номера тезисов и пользователя.
# Таблица @abstract_files@ являет таблицей-загрузчиком файлов, содержит поля идентификации, а также поля самого файла и принадлежность его к какому-либо тезису.
# Таблица @abstract_comments@ хранит информацию о комментариях к тезису, содержит такие поля как, идентификационные номера комментария, тезиса и пользователя, а также синхронизационные поля.
# Таблицы @wiki_pages@ и @wiki_page_versions@ содерат справочные данные. Имеют одинаковые поля версии, содержимого и поле названия, а также в @wiki_page_versions@ содержится идентификационный номер-отсылка на справочную информацию.

h4. Структура таблицы User

| *Название поля*	|*Тип поля* 	|*Описания поля*				|
| id			| integer (11)	| Уникальный идентификатор пользователя 	|
| login			| string (255)	| Логин пользователя				|
| email			| string (25)	| Электронная почта пользователя		|
| first_name		| string (100)  | Имя пользователя				|
| last_name		| string (100)	| Фамилия пользователя				|
| country		| string (100)	| Страна					|
| city			| string (100)	| Город						|
| occupation		| string (100)  | Место работы					|
| projects		| text		| Проекты, в которых принимал участие пользователь|
| crypted_password	| integer (11)	| Шифрование пароля				|
| created_at		| DATA/TIME	| Синхронизационное поле			|
| updated_at		| DATA/TIME	| -//-					|
| remember_token	| string (100)	| Поле запоминания пароля			|
| remember_token_expiries| string (100) | -//-					|
| activation_code	| integer (11)	| Поле генерации кода для активации аккаунта	|
| activated_at		| DATA/TIME	| Поле, которое заполняется датой и временем активации аккаунта |
| role			| integer (11)	| Роль пользователя в проекте			|
| subscribed		| integer (11)  | Поле для подписки на информационые ресурсы	|
| avator		| string (100)  | Поле для аватара пользователя			|
| subscribe_talks	| string (100)	| Поле для подписки на внутрипроектные ресурсы  |

При создании нового пользователя происходит шифрование введенного пароля. В базу данных записываются полученные хэши паролей.

h4. Структура таблицы Conference

| *Название поля* 	| *Тип поля* 	| *Описания поля* 		|
| id			| integer (11)	| Уникальный номер конференции	|
| name			| string (100)	| Название конференции		|
| start_date		| DATA/TIME	| Дата начала конференции	|
| finish_date		| DATA/TIME	| Дата окончания конференции	|
| registration_opened	| integer (11)	| Поле указания открытия/закрытия регистрации на конференцию |
| created_at		| DATA/TIME	| Ссинхронизационное поле	|
| updated_at		| DATA/TIME	| -//-			|

h4. Структура таблицы Abstract

| *Название поля* 	| *Тип поля* 	| *Описания поля* 		|
| id			| integer (11)	| Уникальный номер тезиса	|
| title			| text		| Название			|
| body			| text		| Основное тело тезиса		|
| ready_for_review	| integer (2)	| Предпросмотр			|
| author_id		| integer (11)	| Уникальный номер автора	|
| created_at		| DATA/TIME	| Синхронизационное поле	|
| updated_at		| DATA/TIME	| -//-			|
| version		| integer (11)	| Версия			|
| conference_id		| integer (11)	| Уникальный номер конференции	|
| authors		| string (100)	| (со)авторы тезисов		|
| license		| string (100)	| Лицензия			|

h4. Структура таблицы Conference_registration

| *Название поля* 	| *Тип поля* 	| *Описания поля* 				|
| id			| integer (11)	| Уникальный номер конференции			|
| user_id		| integer (11)	| Уникальный номер пользователя создателя	|
| conference_id		| integer (11)	| Уникальный номер конференции в списке конференций|
| quantity		| integer (11)	| Количество человек				|
| proposition		| string (100)	| Пожелания					|
| status_name		| string (100)	| Статус					|
| days			| DATA/TIME	| Диапазон дней					|
| food			| string (100)	| Решение проблем с пропитанием			|
| tshirt		| text		| Размер футболки				|
| transport_form	| integer (11)	| Транспорт					|
| meeting		| text		| Место встречи					|
| phone			| integer (11)	| Номер телефона				|
| user_type		| string (4)	| Тип пользователя				|
| to_pay		| integer (11)	| Оплата					|
| transport_to		| integer (11)	| Транспорт					|
| residence		| integer (11)	| Место переночевать				|
| floor			| text		| Готовность спать на полу за полцены :)	|
| comment		| text		| Комментарий					|
| created_at		| DATA/TIME	| синхронизационное поле			|
| updated_at		| DATA/TIME	| -//-					|

h4. Структура таблицы Abstract_comment

| *Название поля* 	| *Тип поля* 	| *Описания поля* 		|
| id			| integer (11)	| Уникальный номер комментария	|
| abstract_id		| integer (11)	| Уникальный номер тезиса	|
| user_id		| integer (11)	| Уникальный номер пользователя |
| body			| text		| Тело комментария		|
| created_at		| DATA/TIME	| синхронизационное поле	|
| updated_at		| DATA/TIME	| -//-			|

h4. Структура таблицы Statuses

| *Название поля* 	| *Тип поля* 	| *Описания поля* 			|
| id			| integer (11)	| Уникальный номер статуса		|
| name			| text		| Название статуса			|
| subject		| text		| Тема письма о смене статуса		|
| mail			| text		| Текст письма о смене статуса		|

Таблица содержит статусы, которые можно присваивать заявкам на участие в конференциях. Заполнение статусов происходит через админку сайта. Поле mail содержит текст письма, которое отправляет контроллер модели, когда пользователю присвоен новый статус, а поле subject содержит тему этого сообщения. Адрес отправителя находится в самом контроллере, и берется как константа.

h4. Структура таблицы News

| *Название поля* 	| *Тип поля* 	| *Описания поля* 		|
| id			| integer (11)	| Уникальный номер новости	|
| title			| text		| Название			|
| lead			| text		| Краткая аннотация		|
| body			| text		| Текст новости			|
| user_id		| integer (11)	| Пользователь - автор		|
| created_at		| DATA/TIME	| Синхронизационное поле	|
| updated_at		| DATA/TIME	| -//-			|
| parents_id		| integer (11)	| Раздел-родитель ???		|
| published_ad		| DATA/TIME	| Дата публикации		|
| version		| integer (11)	| Версия			|


